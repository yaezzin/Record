## volatile

volatile 키워드는 멀티스레드 환경에서 변수의 가시성(Visibility) 문제를 해결하기 위해 사용됩니다. 일반적으로 스레드들은 성능 향상을 위해 변수 값을 CPU 캐시에 저장하고 사용합니다. 이로 인해 여러 스레드가 동일한 변수를 사용할 때, 각 스레드가 서로 다른 캐시 값을 참조하여 데이터 불일치가 발생할 수 있습니다.

volatile 키워드를 변수에 선언하면, 해당 변수의 읽기와 쓰기 작업이 항상 메인 메모리에서 직접 수행됩니다. 즉, 한 스레드가 volatile 변수를 변경하면, 그 변경 사항이 즉시 메인 메모리에 반영되어 다른 스레드들이 최신 값을 읽을 수 있게 됩니다.

또한, 자바 5부터 volatile 키워드는 Happens-Before 관계를 보장합니다. 이는 한 스레드가 volatile 변수에 값을 쓰기 전에 수행한 모든 작업이 메인 메모리에 저장되며, 다른 스레드가 동일한 volatile 변수를 읽을 때 그 이전의 모든 작업 결과를 볼 수 있음을 의미합니다.

그러나 volatile 키워드는 **원자성(Atomicity)**을 보장하지 않습니다. 즉, 변수의 값을 읽고 수정하는 복합 연산에서는 여전히 **경쟁 상태(Race Condition)**가 발생할 수 있습니다. 이러한 경우에는 synchronized 키워드나 Lock 객체를 사용하여 동기화를 구현해야 합니다.

따라서, volatile 키워드는 여러 스레드가 공유하는 변수의 가시성을 보장할 때 유용하지만, 복합적인 연산이 필요한 경우에는 추가적인 동기화 메커니즘을 사용해야 합니다.
